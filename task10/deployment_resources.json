{
  "lambda-basic-execution": {
    "policy_content": {
      "Statement": [
        {
          "Action": [
            "logs:CreateLogGroup",
            "logs:CreateLogStream",
            "logs:PutLogEvents",
            "dynamodb:GetItem",
            "dynamodb:Query",
            "dynamodb:PutItem",
            "dynamodb:Batch*",
            "dynamodb:DeleteItem",
            "ssm:PutParameter",
            "ssm:GetParameter",
            "kms:Decrypt",
            "xray:PutTraceSegments",
            "xray:PutTelemetryRecords"
          ],
          "Effect": "Allow",
          "Resource": "*"
        }
      ],
      "Version": "2012-10-17"
    },
    "resource_type": "iam_policy",
    "tags": {}
  },
  "${target_table}": {
    "resource_type": "dynamodb_table",
    "hash_key_name": "id",             
    "hash_key_type": "S",              
    "read_capacity": 1,                
    "write_capacity": 1,               
    "global_indexes": [],              
    "autoscaling": [],                 
    "tags": {
      "Project": "WeatherApp"          
    }
  },
  "lambda-function": {
    "resource_type": "lambda",
    "name": "${lambdas_alias_name}",    
    "version": "v1",                   
    "runtime": "python3.9",
    "handler": "lambda_function.lambda_handler", 
    "code_entry_type": "zip",
    "memory_size": 128,
    "timeout": 15,
    "role": "@processor-role",         
    "environment_variables": {
      "TABLE_NAME": "${target_table}"  
    },
    "tags": {
      "Project": "WeatherApp"
    }
  }
}
